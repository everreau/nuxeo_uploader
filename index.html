<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.css">
  <script type="text/javascript" src="node_modules/jquery/dist/jquery.js"></script>
  <script type="text/javascript" src="node_modules/bootstrap/dist/js/bootstrap.js"></script>
  <script type="text/javascript" src="node_modules/underscore/underscore.js"></script>
  <script type="text/javascript" src="node_modules/backbone/backbone.js"></script>
  <script type="text/javascript" src="node_modules/backbone.epoxy/backbone.epoxy.js"></script>
  <script type="text/javascript" src="node_modules/backbone.localstorage/backbone.localStorage.js"></script>
  <script type="text/javascript" src="node_modules/backbone.marionette/lib/backbone.marionette.js"></script>
  <!-- script type="text/javascript" src="bower_components/nuxeo/lib/jquery/nuxeo.js"></script -->
  <style>
    .panel-body { padding-left: 0.2em; }
  </style>
</head>

<body class="container-fluid">

  <!-- heading + config widget -->
  <div class="row">
    <h1 class="col-xs-10">Nuxeo File Uploader
      <small>send local files to DAMS</small>
    </h1>
    <div class="col-xs-1">
      <span id="nx_status" aria-hidden="true"/>
    </div>

    <!-- configuration -->
    <!-- #configLabel
         .nuxeo-config
         #nuxeo_server
         #nuxeo_token
         #auth_token_link
      -->

    <div class="col-xs-1">
      <button class="btn btn-default" data-target=".nuxeo-config" data-toggle="modal"
        title="setup nuxeo connection" id="configLabel">
        <span class="glyphicon glyphicon-wrench"></span>
        <span class="sr-only">Configuration</span>
      </button>
      <div class="modal fade nuxeo-config" tabindex="-1" role="dialog"
        aria-labelledby="configLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-md">
          <div class="modal-content">
            <h1>Connection Configuration</h1>
              <form class="form-horizontal">
                <div class="form-group">
                  <!-- url -->
                  <label for="nuxeo_server" class="col-sm-3 control-label">Nuxeo Server</label>
                  <div class="col-sm-9">
                    <input type="url" class="form-control" id="nuxeo_server">
                  </div>
                </div>
                <!-- sign in for token (hidden when connected) -->
                <div class="form-group">
                  <div class="col-sm-9 col-sm-offset-3">
                    <a id="auth_token_link">Sign-in and get a Nuxeo Access Token for this computer</a>
                  </div>
                </div>
                <!-- token -->
                <div class="form-group">
                  <label for="nuxeo_token" class="col-sm-3 control-label">Nuxeo Token</label>
                  <div class="col-sm-9">
                    <input type="password" class="form-control" id="nuxeo_token">
                  </div>
                </div>
                <!-- -->
		TODO: "path filter" (currently hard-coded to
		'/asset-library/') and "skip re-upload" (default:
		true) config options
                <!-- div class="form-group">
                  <div class="col-sm-9 col-sm-offset-3">
                  Test Nuxeo Connection
                  </div>
                </div -->
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!--  user input workflow -->
  <!--   ①  ➝  ②  ➝  ③   -->
  <div class="row controls">

    <!-- file upload dialog  -->
    <div class="col-xs-4">
      <input type="file" multiple class="btn btn-primary btn-lg" style="width: 100%; height: 5em;"></input>
    </div>

    <!-- project folder selection -->
    <div class="col-xs-8">
      <form
        type="submit"
        class="btn btn-default btn-lg center-block disabled"
        data-toggle="modal" data-target=".bs-example-modal-lg"
        id="select_nuxeo">
        <span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span>&nbsp;
        <select data-bind="collection:$collection"></select>
      </form>


      <!-- start upload -->
      <div class="">
        <button type="submit" class="btn btn-default btn-lg center-block disabled" id="upload" style="margin-top: 0.25em;">
          <span class="glyphicon glyphicon-cloud-upload" aria-hidden="true"></span>
          Start Upload
        </button>
        <!-- <button type="submit" class="btn btn-default" id="pause">Pause</button> -->
      </div>
    </div>
  </div>

  <!-- workflow feedback -->
  <!--   🅐  ➝  🅑  ➝  🅒  -->
  <div class="row">

    <!-- -->
    <div class="col-xs-4" style="padding-top: 1em;" id="local">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Selected Local files</h3>
        </div>
        <div class="panel-body">
        </div>
      </div>
    </div>

    <!-- -->
    <div class="col-xs-4" style="padding-top: 1em;" id="progress">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Current progress</h3>
        </div>
        <div class="panel-body">
          overall
          <div class="files progress">
            <div class="progress-bar progress-bar-striped active" role="progressbar"
              aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
              <span>0 / 100</span>
            </div>
          </div>
          current files
          <div class="file progress">
            <div class="progress-bar progress-bar-striped active" role="progressbar"
              aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
              <span>0% Complete</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- -->
    <div class="col-xs-4" style="padding-top: 1em;" id="nuxeo">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Uploaded Okay</h3>
        </div>
        <div class="panel-body">
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript" src="main.js"></script>
</body>
</html>
